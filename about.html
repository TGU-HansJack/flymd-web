<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>关于 - 飞速MarkDown</title>
  <meta name="description" content="关于飞速MarkDown" />
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" type="image/png" href="Flymdnew.png" />
  <!-- CDN 配置 -->
  <script src="config.js"></script>
  <script src="cdn.js"></script>
  <style>
    .about-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    .about-content h1 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
    }
    .about-content h2 {
      font-size: 1.5rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    .about-content p {
      line-height: 1.8;
      margin-bottom: 1rem;
      color: var(--text-secondary);
    }
    .about-content img {
      max-width: 90vw;
      display: block;
      margin: 20px auto;
    }
    .about-loading {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <!-- Background Effects Component -->
  <div data-include="bg-effects"></div>

  <!-- Header Component -->
  <div data-include="header"></div>

  <main>
    <section class="section">
      <div class="container">
        <div class="about-content" id="aboutContent">
          <div class="about-loading">加载中...</div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer Component -->
  <div data-include="footer"></div>

  <!-- Scripts -->
  <script src="components/includes.js"></script>
  <script src="i18n.js"></script>
  <script src="libs/marked.min.js"></script>
  <script>
    function assetUrl(path, noCache) {
      if (!path) return path;
      const isAbsolute = /^(?:[a-z]+:)?\/\//i.test(path) || path.startsWith('data:') || path.startsWith('mailto:');
      if (isAbsolute) return path;
      const opts = typeof noCache === 'object' ? noCache : { noCache: !!noCache };
      if (window.cdnUrl) {
        return window.cdnUrl(path, opts);
      }
      if (opts.noCache) {
        const separator = path.indexOf('?') === -1 ? '?' : '&';
        return path + separator + '_t=' + Date.now();
      }
      return path;
    }

    document.addEventListener('DOMContentLoaded', async function() {
      const contentEl = document.getElementById('aboutContent');
      try {
        const response = await fetch(assetUrl('content/about.md', true));
        if (!response.ok) throw new Error('无法加载关于页面内容');
        const markdown = await response.text();
        contentEl.innerHTML = marked.parse(markdown);
      } catch (err) {
        console.error('加载关于页面失败:', err);
        contentEl.innerHTML = `
          <h1>关于飞速Markdown</h1>
          <p>作为一款开源软件，飞速MarkDown可以在非盈利作用情况下免费使用。开源软件也需要倾注大量心血，耗费时间持续进行完善和改进。</p>
          <p>如果您认为该软件对您有所帮助，欢迎在力所能及的情况下，给予适当赞赏。非常感谢您的支持！</p>
          <figure class="media-frame" style="max-width: 420px; margin: 18px auto;">
            <img src="${assetUrl('good.png')}" alt="赞赏二维码" style="width:100%; display:block;"/>
          </figure>
        `;
      }
    });
  </script>
  <script src="app.js"></script>
</body>
</html>
